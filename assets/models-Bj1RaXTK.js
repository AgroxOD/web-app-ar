let n="".trim();n||(console.warn("VITE_API_BASE_URL is empty; falling back to location.origin"),n=typeof location<"u"?location.origin:"");n.endsWith("/api")&&console.warn('VITE_API_BASE_URL should not include "/api"');async function s(){let e=[];try{const t=await fetch(`${n}/api/models`);if(!t.ok)throw new Error(`API request failed: ${t.status}`);e=await t.json()}catch(t){console.error("API error",t)}return!Array.isArray(e)||e.length,e}function r(e=!1){const t={},o=localStorage.getItem("jwt");return o&&(t.Authorization=`Bearer ${o}`),e&&(t["Content-Type"]="application/json"),t}async function c(e,t){const o=await fetch(`${n}/api/models/${encodeURIComponent(e)}`,{method:"PUT",headers:r(!0),body:JSON.stringify(t)});if(!o.ok){const i=(await o.json().catch(()=>({}))).error||(o.status===403?"Forbidden":"Update failed");throw new Error(i)}return o.json().catch(()=>({}))}async function d(e){const t=await fetch(`${n}/api/models/${encodeURIComponent(e)}`,{method:"DELETE",headers:r()});if(!t.ok){const a=(await t.json().catch(()=>({}))).error||(t.status===403?"Forbidden":"Delete failed");throw new Error(a)}return t.json().catch(()=>({}))}export{d as deleteModel,s as loadModels,c as updateModel};
