import"./style-DBLwl-Ec.js";const A="modulepreload",R=function(e){return"/web-app-ar/"+e},v={},g=function(t,n,o){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),r=c?.nonce||c?.getAttribute("nonce");s=Promise.allSettled(n.map(a=>{if(a=R(a),a in v)return;v[a]=!0;const d=a.endsWith(".css"),L=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${L}`))return;const l=document.createElement("link");if(l.rel=d?"stylesheet":A,d||(l.as="script"),l.crossOrigin="",l.href=a,r&&l.setAttribute("nonce",r),document.head.appendChild(l),d)return new Promise((b,P)=>{l.addEventListener("load",b),l.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${a}`)))})}))}function E(c){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=c,window.dispatchEvent(r),!r.defaultPrevented)throw c}return s.then(c=>{for(const r of c||[])r.status==="rejected"&&E(r.reason);return t().catch(E)})},I=document.getElementById("ar-overlay"),S=document.getElementById("start-ar"),f=document.getElementById("marker-select"),h=document.getElementById("model-select"),w=document.getElementById("instructions"),m=document.getElementById("login-form"),u=document.getElementById("register-form"),k=document.getElementById("logout"),{startAR:T,modelParams:C}=await g(async()=>{const{startAR:e,modelParams:t}=await import("./ar-scene-DAPVntcf.js");return{startAR:e,modelParams:t}},[]),{loadModels:M}=await g(async()=>{const{loadModels:e}=await import("./models-VtKfwujZ.js");return{loadModels:e}},[]),{login:D,register:O,logout:$,isAuthenticated:j,setToken:B}=await g(async()=>{const{login:e,register:t,logout:n,isAuthenticated:o,setToken:s}=await import("./auth-BvfLdpt4.js");return{login:e,register:t,logout:n,isAuthenticated:o,setToken:s}},[]);let y=[];try{y=await M();const e=[...new Set(y.map(n=>n.markerIndex))];e.forEach(n=>{const o=document.createElement("option");o.value=n,o.textContent=`Marker ${n}`,f.appendChild(o)});const t=n=>{h.innerHTML="",y.filter(o=>o.markerIndex===parseInt(n,10)).forEach(o=>{const s=document.createElement("option");s.value=o.url,s.textContent=o.name,h.appendChild(s)})};t(e[0]),f.addEventListener("change",n=>t(n.target.value))}catch{}let p=!1;function i(){const e=j();e?(m.style.display="none",u.style.display="none"):p?(m.style.display="none",u.style.display="block"):(m.style.display="block",u.style.display="none"),k.style.display=e?"block":"none",I.style.display=e?"block":"none"}m.addEventListener("submit",async e=>{e.preventDefault();try{const{jwt:t}=await D(document.getElementById("login-email").value,document.getElementById("login-password").value);B(t),i()}catch(t){alert(t.message)}});u.addEventListener("submit",async e=>{e.preventDefault();try{const{jwt:t}=await O(document.getElementById("register-username").value,document.getElementById("register-email").value,document.getElementById("register-password").value);B(t),i()}catch(t){alert(t.message)}});k.addEventListener("click",()=>{$(),i()});document.getElementById("show-register").addEventListener("click",()=>{p=!0,i()});document.getElementById("show-login").addEventListener("click",()=>{p=!1,i()});i();const _=(e,t)=>{document.getElementById(e).addEventListener("input",o=>{C[t]=parseFloat(o.target.value)})};_("rot-y","rotationY");_("scale","scale");S.addEventListener("click",async()=>{await T(y)&&(I.style.display="none",w.style.display="block",setTimeout(()=>{w.style.display="none"},5e3))});
